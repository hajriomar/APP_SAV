<div class="reset-password-container">
  <div class="reset-password-card">
    <div class="reset-password-header">
      <h1>Réinitialiser le mot de passe</h1>
      <p>Entrez votre nouveau mot de passe</p>
    </div>

    <div class="error-message" *ngIf="!token" class="server-error">
      {{ errorMessage }}
      <p style="margin-top: 1rem;"><a routerLink="/forgot-password" class="link">Demander un nouveau lien</a></p>
    </div>

    <form *ngIf="token" [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="reset-password-form">
      <div class="form-group">
        <label for="newPassword">Nouveau mot de passe *</label>
        <input
          type="password"
          id="newPassword"
          formControlName="newPassword"
          class="form-control"
          [class.error]="newPassword?.invalid && newPassword?.touched"
          placeholder="••••••••"
        />
        <div class="error-message" *ngIf="newPassword?.invalid && newPassword?.touched">
          <span *ngIf="newPassword?.errors?.['required']">Le mot de passe est requis</span>
          <span *ngIf="newPassword?.errors?.['minlength']">Minimum 8 caractères</span>
          <span *ngIf="newPassword?.errors?.['maxlength']">Maximum 12 caractères</span>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmer le mot de passe *</label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          class="form-control"
          [class.error]="confirmPassword?.invalid && confirmPassword?.touched"
          placeholder="••••••••"
        />
        <div class="error-message" *ngIf="confirmPassword?.invalid && confirmPassword?.touched">
          <span *ngIf="confirmPassword?.errors?.['required']">La confirmation est requise</span>
          <span *ngIf="confirmPassword?.errors?.['passwordMismatch']">Les mots de passe ne correspondent pas</span>
        </div>
      </div>

      <div class="error-message" *ngIf="errorMessage" class="server-error">
        {{ errorMessage }}
      </div>

      <div class="success-message" *ngIf="successMessage">
        {{ successMessage }}
      </div>

      <button
        type="submit"
        class="btn-primary"
        [disabled]="isLoading || resetPasswordForm.invalid"
      >
        <span *ngIf="!isLoading">Réinitialiser</span>
        <span *ngIf="isLoading">Réinitialisation en cours...</span>
      </button>

      <div class="reset-password-footer">
        <p><a routerLink="/login" class="link">Retour à la connexion</a></p>
      </div>
    </form>
  </div>
</div>
